{"ast":null,"code":"import React,{useState,useEffect}from\"react\";import axios from\"axios\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const BASE_URL=\"https://shadowsec-ai.onrender.com\";function Dashboard(_ref){let{onLogout}=_ref;const[targetUrl,setTargetUrl]=useState(\"\");const[reports,setReports]=useState([]);const[summaries,setSummaries]=useState([]);const[history,setHistory]=useState([]);const launchScan=async()=>{try{await axios.post(`${API_URL}/scan`,{url:targetUrl});alert(\"✅ Scan lancé avec succès !\");fetchAllData();}catch(error){console.error(error);alert(\"❌ Erreur lors du lancement du scan.\");}};const fetchAllData=async()=>{try{const[reportsRes,summariesRes]=await Promise.all([axios.get(`${API_URL}/reports`),axios.get(`${API_URL}/summaries`)]);setReports(reportsRes.data);setSummaries(summariesRes.data);}catch(error){console.error(\"Erreur lors du chargement des données :\",error);}};useEffect(()=>{fetchAllData();},[]);const getSeverityLabel=summary=>{const sqli=summary.some(s=>s.includes(\"SQLi\"));const xss=summary.some(s=>s.includes(\"XSS\"));const ports=summary.some(s=>s.includes(\"Ports\"));if(sqli&&xss)return/*#__PURE__*/_jsx(\"span\",{style:{color:\"red\"},children:\"Critique\"});if(sqli||xss)return/*#__PURE__*/_jsx(\"span\",{style:{color:\"orange\"},children:\"\\xC9lev\\xE9e\"});if(ports)return/*#__PURE__*/_jsx(\"span\",{style:{color:\"#d1a000\"},children:\"Mod\\xE9r\\xE9e\"});return/*#__PURE__*/_jsx(\"span\",{style:{color:\"lightgreen\"},children:\"Faible\"});};return/*#__PURE__*/_jsxs(\"div\",{style:{padding:30,fontFamily:\"Segoe UI, sans-serif\",backgroundColor:\"#111\",color:\"#fff\",minHeight:\"100vh\"},children:[/*#__PURE__*/_jsxs(\"div\",{style:{display:\"flex\",justifyContent:\"space-between\",alignItems:\"center\"},children:[/*#__PURE__*/_jsx(\"h1\",{style:{color:\"#00FFCC\"},children:\"ShadowSec AI Dashboard\"}),/*#__PURE__*/_jsx(\"button\",{onClick:onLogout,style:{backgroundColor:\"#e74c3c\",color:\"#fff\",border:\"none\",padding:\"0.5rem 1rem\",borderRadius:4,cursor:\"pointer\"},children:\"Se d\\xE9connecter\"})]}),/*#__PURE__*/_jsxs(\"div\",{style:{marginTop:30},children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"http://example.com\",value:targetUrl,onChange:e=>setTargetUrl(e.target.value),style:{padding:\"0.6rem\",width:\"350px\",marginRight:\"10px\",background:\"#222\",color:\"#fff\",border:\"1px solid #555\"}}),/*#__PURE__*/_jsx(\"button\",{onClick:launchScan,style:{padding:\"0.6rem 1rem\",background:\"#00FFC6\",border:\"none\",color:\"#000\",fontWeight:\"bold\",borderRadius:5},children:\"Lancer un Scan\"})]}),/*#__PURE__*/_jsx(\"hr\",{style:{margin:\"30px 0\",borderColor:\"#333\"}}),/*#__PURE__*/_jsx(\"h2\",{style:{color:\"#fff\"},children:\"Rapports g\\xE9n\\xE9r\\xE9s\"}),/*#__PURE__*/_jsx(\"ul\",{children:reports.map(r=>/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsx(\"a\",{href:`${API_URL}/reports/${r.filename}`,target:\"_blank\",rel:\"noopener noreferrer\",style:{color:\"#00e0ff\"},children:r.filename})},r.filename))}),/*#__PURE__*/_jsx(\"h2\",{style:{marginTop:30,color:\"#fff\"},children:\"R\\xE9sum\\xE9s des rapports\"}),summaries.map(summary=>/*#__PURE__*/_jsxs(\"div\",{style:{marginBottom:25},children:[/*#__PURE__*/_jsx(\"strong\",{children:summary.filename}),/*#__PURE__*/_jsx(\"div\",{style:{marginTop:5},children:getSeverityLabel(summary.summary)}),/*#__PURE__*/_jsx(\"ul\",{children:summary.summary.map((item,idx)=>/*#__PURE__*/_jsx(\"li\",{children:item},idx))})]},summary.filename))]});}export default Dashboard;","map":{"version":3,"names":["React","useState","useEffect","axios","jsx","_jsx","jsxs","_jsxs","BASE_URL","Dashboard","_ref","onLogout","targetUrl","setTargetUrl","reports","setReports","summaries","setSummaries","history","setHistory","launchScan","post","API_URL","url","alert","fetchAllData","error","console","reportsRes","summariesRes","Promise","all","get","data","getSeverityLabel","summary","sqli","some","s","includes","xss","ports","style","color","children","padding","fontFamily","backgroundColor","minHeight","display","justifyContent","alignItems","onClick","border","borderRadius","cursor","marginTop","type","placeholder","value","onChange","e","target","width","marginRight","background","fontWeight","margin","borderColor","map","r","href","filename","rel","marginBottom","item","idx"],"sources":["C:/Users/benla/Downloads/shadowsec_frontend_fixed/src/Dashboard.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport axios from \"axios\";\r\n\r\nconst BASE_URL = \"https://shadowsec-ai.onrender.com\"\r\n\r\nfunction Dashboard({ onLogout }) {\r\n  const [targetUrl, setTargetUrl] = useState(\"\");\r\n  const [reports, setReports] = useState([]);\r\n  const [summaries, setSummaries] = useState([]);\r\n  const [history, setHistory] = useState([]);\r\n\r\n  const launchScan = async () => {\r\n    try {\r\n      await axios.post(`${API_URL}/scan`, { url: targetUrl });\r\n      alert(\"✅ Scan lancé avec succès !\");\r\n      fetchAllData();\r\n    } catch (error) {\r\n      console.error(error);\r\n      alert(\"❌ Erreur lors du lancement du scan.\");\r\n    }\r\n  };\r\n\r\n  const fetchAllData = async () => {\r\n    try {\r\n      const [reportsRes, summariesRes] = await Promise.all([\r\n        axios.get(`${API_URL}/reports`),\r\n        axios.get(`${API_URL}/summaries`)\r\n      ]);\r\n      setReports(reportsRes.data);\r\n      setSummaries(summariesRes.data);\r\n    } catch (error) {\r\n      console.error(\"Erreur lors du chargement des données :\", error);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    fetchAllData();\r\n  }, []);\r\n\r\n  const getSeverityLabel = (summary) => {\r\n    const sqli = summary.some((s) => s.includes(\"SQLi\"));\r\n    const xss = summary.some((s) => s.includes(\"XSS\"));\r\n    const ports = summary.some((s) => s.includes(\"Ports\"));\r\n\r\n    if (sqli && xss) return <span style={{ color: \"red\" }}>Critique</span>;\r\n    if (sqli || xss) return <span style={{ color: \"orange\" }}>Élevée</span>;\r\n    if (ports) return <span style={{ color: \"#d1a000\" }}>Modérée</span>;\r\n    return <span style={{ color: \"lightgreen\" }}>Faible</span>;\r\n  };\r\n\r\n  return (\r\n    <div style={{ padding: 30, fontFamily: \"Segoe UI, sans-serif\", backgroundColor: \"#111\", color: \"#fff\", minHeight: \"100vh\" }}>\r\n      <div style={{ display: \"flex\", justifyContent: \"space-between\", alignItems: \"center\" }}>\r\n        <h1 style={{ color: \"#00FFCC\" }}>ShadowSec AI Dashboard</h1>\r\n        <button\r\n          onClick={onLogout}\r\n          style={{ backgroundColor: \"#e74c3c\", color: \"#fff\", border: \"none\", padding: \"0.5rem 1rem\", borderRadius: 4, cursor: \"pointer\" }}\r\n        >\r\n          Se déconnecter\r\n        </button>\r\n      </div>\r\n\r\n      <div style={{ marginTop: 30 }}>\r\n        <input\r\n          type=\"text\"\r\n          placeholder=\"http://example.com\"\r\n          value={targetUrl}\r\n          onChange={(e) => setTargetUrl(e.target.value)}\r\n          style={{ padding: \"0.6rem\", width: \"350px\", marginRight: \"10px\", background: \"#222\", color: \"#fff\", border: \"1px solid #555\" }}\r\n        />\r\n        <button\r\n          onClick={launchScan}\r\n          style={{ padding: \"0.6rem 1rem\", background: \"#00FFC6\", border: \"none\", color: \"#000\", fontWeight: \"bold\", borderRadius: 5 }}\r\n        >\r\n          Lancer un Scan\r\n        </button>\r\n      </div>\r\n\r\n      <hr style={{ margin: \"30px 0\", borderColor: \"#333\" }} />\r\n\r\n      <h2 style={{ color: \"#fff\" }}>Rapports générés</h2>\r\n      <ul>\r\n        {reports.map((r) => (\r\n          <li key={r.filename}>\r\n            <a href={`${API_URL}/reports/${r.filename}`} target=\"_blank\" rel=\"noopener noreferrer\" style={{ color: \"#00e0ff\" }}>\r\n              {r.filename}\r\n            </a>\r\n          </li>\r\n        ))}\r\n      </ul>\r\n\r\n      <h2 style={{ marginTop: 30, color: \"#fff\" }}>Résumés des rapports</h2>\r\n      {summaries.map((summary) => (\r\n        <div key={summary.filename} style={{ marginBottom: 25 }}>\r\n          <strong>{summary.filename}</strong>\r\n          <div style={{ marginTop: 5 }}>{getSeverityLabel(summary.summary)}</div>\r\n          <ul>\r\n            {summary.summary.map((item, idx) => (\r\n              <li key={idx}>{item}</li>\r\n            ))}\r\n          </ul>\r\n        </div>\r\n      ))}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Dashboard;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}